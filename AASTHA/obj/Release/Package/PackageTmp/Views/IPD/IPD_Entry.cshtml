@model AASTHA.Models.IPDModel
@{
    ViewBag.Title = "IPD_Entry";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

<link rel="stylesheet" href="~/Content/js/select2/select2-bootstrap.css" id="style-resource-1">
<link rel="stylesheet" href="~/Content/js/selectboxit/jquery.selectBoxIt.css" id="style-resource-3">
<link rel="stylesheet" href="~/Content/js/select2/select2.css" id="style-resource-2">
<link href="~/Content/css/bootstrap-multiselect.css" rel="stylesheet" />
@Html.Partial("_ResultMEssage")
<div class="panel panel-primary" data-collapsed="0">
    <div class="panel-heading">
        <div class="panel-title">
            IPD Entry
        </div>
        <div class="panel-options"> <a href="#sample-modal" data-toggle="modal" data-target="#sample-modal-dialog-1" class="bg"><i class="entypo-cog"></i></a> <a href="#" data-rel="collapse"><i class="entypo-down-open"></i></a> <a href="#" data-rel="reload"><i class="entypo-arrows-ccw"></i></a> <a href="#" data-rel="close"><i class="entypo-cancel"></i></a> </div>
    </div> <div class="panel-body">

        @using (Html.BeginForm("Modal_Edit", "IPD"))
        {
            <div class="row">
                <div class="col-md-2">
                    <div class="form-group">
                        <label class="control-label" for="about">Invoice No.</label>
                        @Html.TextBoxFor(m => m.IPD_Id_Edit, new { @class = "form-control", @type = "number"  })
                        @Html.ValidationMessageFor(m => m.IPD_Id_Edit)
                    </div>
                </div>
                <div class="col-md-3 selectContainer">
                    <div class="form-group">
                        <label class="control-label" for="full_name">Full Name</label>
                        <input id="Patient_Id" name="Patient_Id" required>
                        @Html.ValidationMessageFor(m => m.Patient_Id)
                    </div>
                </div>
            </div>
            <div class="row">

                <div class="col-md-3 selectbox">
                    <div class="form-group">
                        <label class="control-label" for="about">Room Type</label>
                        @Html.DropDownListFor(m => m.Room_Type, (IEnumerable<SelectListItem>)ViewBag.Room_Type_List, "Select ", new { @class = "selectboxit" })
                        @Html.ValidationMessageFor(m => m.Room_Type)
                    </div>
                </div>
                <div class="col-md-3 selectContainer">
                    <div class="form-group">
                        <label for="field-4" class="control-label">Addmission Date</label>
                        <div class="input-group">
                            @Html.TextBoxFor(m => m.Addmission_Date, new { @class = "form-control datepicker", placeholder = "Enter Date" })
                            <div class="input-group-addon"> <a href="#"><i class="entypo-calendar"></i></a> </div>
                        </div>
                        @Html.ValidationMessageFor(m => m.Addmission_Date)
                    </div>
                </div>
                <div class="col-md-3 selectbox">
                    <div class="form-group">
                        <label class="control-label" for="about">IPD Type</label>
                        @Html.DropDownListFor(m => m.IPD_Type, (IEnumerable<SelectListItem>)ViewBag.IPD_Type_List, "Select ", new { @class = "selectboxit" })
                        @Html.ValidationMessageFor(m => m.IPD_Type)
                    </div>
                </div>
                <div class="col-md-3 selectContainer">
                    <div class="form-group">
                        <label class="control-label" for="full_name">Discharge Date</label>
                        <div class="input-group">
                            @Html.TextBoxFor(m => m.Discharge_Date, new { @class = "form-control datepicker", placeholder = "Enter Date" })
                            <div class="input-group-addon"> <a href="#"><i class="entypo-calendar"></i></a> </div>
                        </div>
                        @Html.ValidationMessageFor(m => m.Discharge_Date)
                    </div>
                </div>
            </div>
            <div id="Delivery">
                <div class="row">
                    <div class="col-md-4 selectContainer">
                        <div class="form-group">
                            <label class="control-label" for="full_name">Delivery Date</label>
                            <div class="input-group">
                                @Html.TextBoxFor(m => m.Delivery_Date, new { @class = "form-control datepicker", placeholder = "Enter Date" })
                                <div class="input-group-addon"> <a href="#"><i class="entypo-calendar"></i></a> </div>
                            </div>
                            @Html.ValidationMessageFor(m => m.Delivery_Date)
                        </div>
                    </div>
                    <div class="col-md-4 selectContainer">
                        <div class="form-group">
                            <label for="field-4" class="control-label">Delivery Time</label>
                            <div class="input-group">
                                @Html.TextBoxFor(m => m.Delivery_Time, new { @class = "form-control timepicker" })
                                @*<input type="text" class="form-control timepicker" data-template="dropdown" data-show-seconds="true" data-default-time="11:25 AM" data-show-meridian="true" data-minute-step="5" data-second-step="5">*@
                                <div class="input-group-addon"> <a href="#"><i class="entypo-clock"></i></a> </div>
                            </div>
                            @Html.ValidationMessageFor(m => m.Delivery_Time)
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="field-4" class="control-label">Type of Delivery</label><br />
                            @Html.DropDownListFor(m => m.Delivery_Type, (IEnumerable<SelectListItem>)ViewBag.Delivery_Type_List, new { @class = "multiselect", multiple = "multiple", name = "type" })
                            @Html.ValidationMessageFor(m => m.Delivery_Type)
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 selectbox">
                        <div class="form-group">
                            <label class="control-label" for="about">Diagnosis</label>
                            @Html.DropDownListFor(m => m.Delivery_Diagnosis, (IEnumerable<SelectListItem>)ViewBag.Delivery_Diagnosis_List, "Select", new { @class = "selectboxit visible" })
                            @Html.ValidationMessageFor(m => m.Delivery_Diagnosis)
                        </div>
                    </div>
                    <div class="col-md-4 selectbox">
                        <div class="form-group">
                            <label for="field-4" class="control-label">Baby Gender</label>
                            @Html.DropDownListFor(m => m.Baby_Gender, (IEnumerable<SelectListItem>)ViewBag.Baby_Gender_List, "Select", new { @class = "selectboxit visible" })
                            @Html.ValidationMessageFor(m => m.Baby_Gender)
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="field-4" class="control-label">Baby Weight</label>
                            @Html.TextBoxFor(m => m.Baby_Weight, new { @class = "form-control" })
                            @Html.ValidationMessageFor(m => m.Baby_Weight)
                        </div>
                    </div>
                </div>
            </div>
            <div id="Operation">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label" for="about">Operation Date</label>
                            @Html.TextBoxFor(m => m.Operation_Date, new { @class = "form-control datepicker", placeholder = "Enter Date" })
                            @Html.ValidationMessageFor(m => m.Operation_Date)
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="field-4" class="control-label">Diagnosis</label><br />
                            @Html.DropDownListFor(m => m.Operation_Diagnosis, (IEnumerable<SelectListItem>)ViewBag.Operation_Diagnosis_List, new { @class = "multiselect", multiple = "multiple" })
                            @Html.ValidationMessageFor(m => m.Operation_Diagnosis)
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="field-4" class="control-label">Operation Type</label><br />
                            @Html.DropDownListFor(m => m.Operation_Type, (IEnumerable<SelectListItem>)ViewBag.Operation_Type_List, new { @class = "multiselect", multiple = "multiple" })
                            @Html.ValidationMessageFor(m => m.Operation_Type)
                        </div>
                    </div>
                </div>
            </div>
            <div id="General">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="control-label" for="about">Diagnosis</label><br />
                            @Html.DropDownListFor(m => m.General_Diagnosis, (IEnumerable<SelectListItem>)ViewBag.General_Diagnosis_List, new { @class = "multiselect", multiple = "multiple" })
                            @Html.ValidationMessageFor(m => m.General_Diagnosis)
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div id="Charges" class="col-lg-12">
                    @Html.Action("Charges_Table", "IPD")
                </div>
            </div>
            <div class="form-group pull-right">
                <input type="button" value="Reset" class="btn btn-default" id="btnreset" />
                <input type="submit" class="btn btn-info" />
            </div>
        }
    </div>
</div>
<script src="~/Scripts/jquery.inputmask.bundle.min.js"></script>
<script src="~/Content/js/bootstrap-datepicker.js"></script>
<script src="~/Content/js/jquery-ui/js/jquery-ui-1.10.3.minimal.min.js" id="script-resource-2"></script>
<script src="~/Content/js/select2/select2.min.js" id="script-resource-8"></script>
<script src="~/Content/js/selectboxit/jquery.selectBoxIt.min.js" id="script-resource-11"></script>
<script src="~/Scripts/bootstrap-multiselect.js"></script>
<script src="~/Content/js/bootstrap-timepicker.min.js"></script>

<script>

    $(document).ready(function () {
        datemask();
        $('.Charge').inputmask('Regex', {
            regex: "^[0-9]{5}$"
        });
        $("#Delivery").hide();
        $("#Operation").hide();
        $("#General").hide();

        $("#IPD_Type").change(function () {
            $(this).valid();
            var type = $("#IPD_Type").val();

            if (type == "Delivery") {
                $("#Delivery").show();
                $("#Operation").hide();
                $("#General").hide();
            }
            else if (type == "Operation") {
                $("#Operation").show();
                $("#Delivery").hide();
                $("#General").hide();
            }
            else if (type == "General") {
                $("#General").show();
                $("#Delivery").hide();
                $("#Operation").hide();
            }
            else {
                $("#General").hide();
                $("#Delivery").hide();
                $("#Operation").hide();
            }
        })

        $('.multiselect').multiselect({
            buttonWidth: '100%'
        });

        $("#btnreset").click(function () {
            resetform();
            resetValidation();
        })

        $(".datepicker").change(function () {
            $(this).valid();
        })

        $("select").change(function () {
            $(this).valid();
        })

        $('.timepicker').timepicker({
            template: false,
            showInputs: false,
            minuteStep: 1
        });
        $("#Patient_Id").select2(
                  {
                      minimumInputLength: 1,
                      placeholder: "Select a Patient",
                      allowClear: true,
                      ajax: {
                          url: "@Url.Action("BindPatient", "Patient")",
                          dataType: 'json',
                          type: "GET",
                          quietMillis: 50,
                          data: function (term) {
                              return {
                                  term: term
                              };
                          },
                          results: function (data) {
                              return {
                                  results: $.map(data, function (item) {
                                      return {
                                          text: item.full_name,
                                          id: item.patient_Id
                                      }
                                  })
                              };
                          }
                      }
                  });
    })

</script>